{"version":3,"sources":["../../../src/adapter/websocket/base.js"],"names":["init","server","config","app","isOriginAllowed","origin","allowOrigins","allow_origin","info","parse","hostname","think","isString","isArray","indexOf","isFunction","run","adapter","base"],"mappings":"AAAA;;;;;;;;;;;;;;;;AAEA;;;;;;;;;;;;;;AAGE;;;;;;mBAMAA,I,iBAAKC,M,EAAQC,M,EAAQC,G,EAAI;AACvB,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,GAAL,GAAWA,GAAX;AACD,G;AACD;;;;;;;mBAKAC,e,4BAAgBC,M,EAAO;AACrB,QAAIC,eAAe,KAAKJ,MAAL,CAAYK,YAA/B;AACA,QAAI,CAACD,YAAL,EAAmB;AACjB,aAAO,IAAP;AACD;AACD,QAAIE,OAAO,cAAIC,KAAJ,CAAUJ,MAAV,CAAX;AACA,QAAIK,WAAWF,KAAKE,QAApB;AACA,QAAIC,MAAMC,QAAN,CAAeN,YAAf,CAAJ,EAAkC;AAChC,aAAOA,iBAAiBI,QAAxB;AACD,KAFD,MAEM,IAAIC,MAAME,OAAN,CAAcP,YAAd,CAAJ,EAAiC;AACrC,aAAOA,aAAaQ,OAAb,CAAqBJ,QAArB,IAAiC,CAAC,CAAzC;AACD,KAFK,MAEA,IAAIC,MAAMI,UAAN,CAAiBT,YAAjB,CAAJ,EAAoC;AACxC,aAAOA,aAAaI,QAAb,EAAuBF,IAAvB,CAAP;AACD;AACD,WAAO,KAAP;AACD,G;AACD;;;;;;mBAIAQ,G,kBAAK,CAEJ,C;;;EAvC0BL,MAAMM,OAAN,CAAcC,I","file":"base.js","sourcesContent":["'use strict';\n\nimport url from 'url';\n\nexport default class extends think.adapter.base {\n  /**\n   * init\n   * @param  {Object} server []\n   * @param  {Object} config []\n   * @return {Object}        []\n   */\n  init(server, config, app){\n    this.server = server;\n    this.config = config;\n    this.app = app;\n  }\n  /**\n   * check origin allowed\n   * @param  {String}  origin []\n   * @return {Boolean}        []\n   */\n  isOriginAllowed(origin){\n    let allowOrigins = this.config.allow_origin;\n    if (!allowOrigins) {\n      return true;\n    }\n    let info = url.parse(origin);\n    let hostname = info.hostname;\n    if (think.isString(allowOrigins)) {\n      return allowOrigins === hostname;\n    }else if (think.isArray(allowOrigins)) {\n      return allowOrigins.indexOf(hostname) > -1;\n    }else if (think.isFunction(allowOrigins)) {\n      return allowOrigins(hostname, info);\n    }\n    return false;\n  }\n  /**\n   * run\n   * @return {} []\n   */\n  run(){\n\n  }\n}"]}